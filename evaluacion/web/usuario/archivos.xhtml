<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                template="../templates/userTemplate.xhtml"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html">

    <ui:define name="content">
        
        <ui:include src="/recursos/mensajesDlg.xhtml"/>
        
        <ui:include src="formularioEvaluacionDlg.xhtml"/>
        
        <ui:include src="documentoEditDlg.xhtml"/>
        
        <!--<ui:include src="formularioEvaluacionVistaPreviaDlg.xhtml"/>-->
        

        <p:dialog id="dDetalleProyecto"
                  widgetVar="dlgDetalleProyecto"
                  modal="true"
                  width="600"
                  height="400"
                  closable="false">

            <f:facet name="header">
                <h:outputText value="Detalles" style="font-size: 1.5em; font-weight: bold;"/>
            </f:facet>
            <h:panelGrid columns="2" styleClass="tablaDetalle">
                <h:outputText value="Código:" rendered="#{proyectoBean.proyecto.codigo != null}"/>
                <h:outputText value="#{proyectoBean.proyecto.codigo}" rendered="#{proyectoBean.proyecto.codigo!= null}" title="Código"/>
                <h:outputText value="Código Incentivos:" rendered="#{proyectoBean.proyecto.codigoIncentivos!= null}"/>
                <h:outputText value="#{proyectoBean.proyecto.codigoIncentivos}" rendered="#{proyectoBean.proyecto.codigoIncentivos!= null}" title="Código Incentivos"/>
                <h:outputText value="Título:" rendered="#{proyectoBean.proyecto.titulo!= null}"/>
                <h:outputText value="#{proyectoBean.proyecto.titulo}" rendered="#{proyectoBean.proyecto.titulo!= null}" title="Título"/>
                <h:outputText value="Unidad Académica:" rendered="#{proyectoBean.proyecto.unidadAcademica.descripcion!= null}"/>
                <h:outputText value="#{proyectoBean.proyecto.unidadAcademica}" rendered="#{proyectoBean.proyecto.unidadAcademica.descripcion!= null}" title="Unidad Académica"/>
                <h:outputText value="Objetivo Socioeconómico:" rendered="#{proyectoBean.proyecto.objetivoSocioeconomico.descripcion!= null}"/>
                <h:outputText value="#{proyectoBean.proyecto.objetivoSocioeconomico}" rendered="#{proyectoBean.proyecto.objetivoSocioeconomico.descripcion!= null}" title="Objetivo Socioeconómico"/>
                <h:outputText value="Entidad Evaluadora:" rendered="#{proyectoBean.proyecto.entidadEvaluadora.descripcion!= null}"/>
                <h:outputText value="#{proyectoBean.proyecto.entidadEvaluadora}" rendered="#{proyectoBean.proyecto.entidadEvaluadora.descripcion!= null}" title="Entidad Evaluadora"/>
                <h:outputText value="Duración Teórica (Años):" rendered="#{proyectoBean.proyecto.duracionTeorica != null}"/>
                <h:outputText value="#{proyectoBean.proyecto.duracionTeorica}" rendered="#{proyectoBean.proyecto.duracionTeorica != null}" title="Duración Teórica"/>
                <h:outputText value="Fecha de Inicio:" rendered="#{proyectoBean.proyecto.fechaInicio != null}"/>
                <h:outputText value="#{proyectoBean.proyecto.fechaInicio}" rendered="#{proyectoBean.proyecto.fechaInicio != null}" title="Fecha de Inicio">
                    <f:convertDateTime pattern="dd/MM/yyyy" />
                </h:outputText>
                
                <h:outputText value="Director:"/>
                <h:outputText value="#{proyectoBean.director}" title="Director"/>
                
                <h:outputText value="Fecha de Finalización:" rendered="#{proyectoBean.proyecto.fechaFinalizacion != null }"/>
                <h:outputText value="#{proyectoBean.proyecto.fechaFinalizacion}" rendered="#{proyectoBean.proyecto.fechaFinalizacion != null }" title="Fecha de Finalización">
                    <f:convertDateTime pattern="dd/MM/yyyy" />
                </h:outputText>
                <h:outputText value="Tipo de Proyecto:" rendered="#{proyectoBean.proyecto.tipoProyecto.descripcion!= null}"/>
                <h:outputText value="#{proyectoBean.proyecto.tipoProyecto}" rendered="#{proyectoBean.proyecto.tipoProyecto.descripcion!= null}" title="Tipo de Proyecto"/>
                <h:outputText value="Resumen:" rendered="#{proyectoBean.proyecto.resumen!= null}"/>
                <h:outputText value="#{proyectoBean.proyecto.resumen}" title="Resumen" rendered="#{proyectoBean.proyecto.resumen!= null}"/>   
                <h:outputText value="Linea de Investigación:" rendered="#{proyectoBean.proyecto.lineaInvestigacion.descripcion!= null}"/>
                <h:outputText value="#{proyectoBean.proyecto.lineaInvestigacion}" rendered="#{proyectoBean.proyecto.lineaInvestigacion.descripcion!= null}" title="Línea de Investigación"/>
                <h:outputText value="Observaciones:" rendered="#{proyectoBean.proyecto.observaciones!= null}"/>
                <h:outputText value="#{proyectoBean.proyecto.observaciones}" rendered="#{proyectoBean.proyecto.observaciones!= null}" title="Observaciones"/>
                <h:outputText value="Palabras Claves:" rendered="#{proyectoBean.proyecto.palabrasClaves.size() > 0}"/>
                <ui:repeat rendered="#{proyectoBean.proyecto.palabrasClaves.size() > 0}" value="#{proyectoBean.proyecto.palabrasClaves}"
                           var="pal"><span><h:outputText value="#{pal}"/></span><br /></ui:repeat>                    
                <h:outputText value="Programa:" rendered="#{proyectoBean.proyecto.programa!=null}"/>
                <h:outputText value="#{proyectoBean.proyecto.programa}" rendered="#{proyectoBean.proyecto.programa!= null}" title="Programa"/>
                <h:outputText value="Proyecto Complementario Padre:" rendered="#{proyectoBean.proyecto.proyectoComplementarioPadre.titulo!= null}"/>
                <h:outputText value="#{proyectoBean.proyecto.proyectoComplementarioPadre}" rendered="#{proyectoBean.proyecto.proyectoComplementarioPadre.titulo!= null}" title="Proyecto ComplementarioPadre"/>
                <h:outputText value="Title:" rendered="#{proyectoBean.proyecto.title!= null}"/>
                <h:outputText value="#{proyectoBean.proyecto.title}" rendered="#{proyectoBean.proyecto.title!= null}" title="Title"/>
                <h:outputText value="Summary:" rendered="#{proyectoBean.proyecto.summary!= null}"/>
                <h:outputText value="#{proyectoBean.proyecto.summary}" rendered="#{proyectoBean.proyecto.summary!= null}" title="Summary"/>
                <h:outputText value="Keywords:" rendered="#{proyectoBean.proyecto.keywords.size() > 0}"/>
                <ui:repeat rendered="#{proyectoBean.proyecto.keywords.size() > 0}" value="#{proyectoBean.proyecto.keywords}"
                           var="key"><span><h:outputText value="#{key}"/></span><br /></ui:repeat>
                
                <h:outputText value="Resoluciones" rendered="#{not empty proyectoBean.proyecto.resoluciones}"/>
                <ui:repeat rendered="#{not empty proyectoBean.proyecto.resoluciones}" 
                           value="#{proyectoBean.proyecto.resoluciones}"
                           var="resol">
                    <p:commandLink  
                                value="#{resol.documento.nombreArchivo}"
                                action="#{proyectoBean.descargarArchivo(
                                          resol.documento.contenidoArchivo, 
                                          resol.documento.nombreArchivo)}"
                                ajax="false">
                   
                </p:commandLink>
                
                </ui:repeat>
                           
            </h:panelGrid>
            <br/>
            
            <center>
                <h:commandButton value="Salir"
                                 />
            </center><br/>
            
            <h:outputLink value="mailto:proyectosecyt@unca.edu.ar">Para mayor información escriba a proyectosecyt@unca.edu.ar</h:outputLink>

        </p:dialog>


        <div style="clear: both"/>
        
        <p:panel id="pArchivo">
        <table   cellspacing="5px;" cellpadding="10" >
            <tr bgcolor="gray" valign="middle" >
                <td>
                     <h:outputText value="Código"
                                  styleClass="textoEtiqueta"/>
                </td>
                <td>
                    <h:outputText value="Proyecto"
                                  styleClass="textoEtiqueta"/>
                </td>
                <td>
                    <h:outputText value="Detalle"
                                  styleClass="textoEtiqueta"/>
                </td>
                <td>
                    <h:outputText value="Adjuntar"
                                  styleClass="textoEtiqueta"/>
                </td>
            </tr>
        <ui:repeat value="#{evaluacionWebLstBean.lstEvaluacionWeb}"
                     
                     var="e">
            
            <tr>
                <td>
                    <h:outputText value="#{e.proyecto.codigoIncentivos}"
                              styleClass="textoValue" />
                </td>
                
                <td>
                    <h:outputText value="#{e.proyecto.titulo}"
                              styleClass="textoValue"/>
                </td>
                
                <td>
                    <p:commandButton actionListener="#{proyectoBean.setProyecto(e.proyecto)}"
                                 oncomplete="dlgDetalleProyecto.show()" 
                                 value="Ver" 
                                 styleClass="textoValue"
                                 update=":frmUser:dDetalleProyecto"
                                 process="@this"/>
                </td>
                
                <td>
                    <p:commandButton id="cbDocumentoCreate"
                             value="Adjuntar" 
                             icon="ui-icon-circle-plus" 
                             oncomplete="dlgDocumentoEditDlg.show();"
                             actionListener="#{documentoEditDlgBean.setBtnSelect}"
                             
                             update=":frmUser:dDocumentoEditDlg"
                             process="@this">
                

                    <f:setPropertyActionListener value="ui-icon-circle-plus" target="#{documentoEditDlgBean.icono}"/> 
                    <f:setPropertyActionListener value="#{false}" target="#{documentoEditDlgBean.campoEditable}"/> 
                    <f:setPropertyActionListener value="#{e}" target="#{evaluacionWebBean.evaluacionWeb}"/> 
                
                </p:commandButton>
                </td>
                
            </tr>
            
            <tr>
                <td colspan="4">
                    <p:dataTable 
                     var="doc" value="#{e.documentos}"
                    
                     >
            
            
            
            <p:column>
                <f:facet name="header">
                    <h:outputText value="Archivo"/>
                </f:facet>

                <p:commandLink  
                                value="#{doc.nombreArchivo}"
                                action="#{proyectoBean.descargarArchivo(
                                          doc.contenidoArchivo, 
                                          doc.nombreArchivo)}"
                                ajax="false">
                   
                </p:commandLink>

                    
            </p:column>
            
            <p:column>
                
                <f:facet name="header">
                    <h:outputText value="Eliminar"/>
                </f:facet>
                <p:commandButton id="cbDocumentoDelete"
                                     title="Eliminar"
                                     icon="ui-icon-circle-close" 
                                     oncomplete="dlgDocumentoEditDlg.show();"
                                     actionListener="#{documentoEditDlgBean.setBtnSelect}"
                                     update=":frmUser:dDocumentoEditDlg :frmUser:dMensaje"
                                     > 

                        <f:setPropertyActionListener value="#{e}" target="#{evaluacionWebBean.evaluacionWeb}"/> 
                        <f:setPropertyActionListener value="#{doc}" target="#{documentoLstBean.documento}"/> 
                        <f:setPropertyActionListener value="#{true}" target="#{documentoEditDlgBean.campoEditable}"/> 
                        <f:setPropertyActionListener value="ui-icon-circle-close" target="#{documentoEditDlgBean.icono}"/> 

                    </p:commandButton>
            </p:column>
            




            
            
            
        </p:dataTable>
                </td>
            </tr>
            
            <tr>
                <td colspan="4">
                    <hr size="8" style="background-color: #000;"/>
                </td>
            </tr>
                
        </ui:repeat>
        </table>
        </p:panel>
       

        
    </ui:define>

</ui:composition>
